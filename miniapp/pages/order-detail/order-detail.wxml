<view class="page-container">
  <!-- åŠ è½½ä¸­ -->
  <view class="loading-state" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <block wx:elif="{{order}}">
    <!-- è®¢å•çŠ¶æ€å¡ç‰‡ -->
    <view class="status-card {{order.status}}">
      <view class="status-icon">
        <text wx:if="{{order.status === 'completed'}}">âœ…</text>
        <text wx:elif="{{order.status === 'cancelled'}}">âŒ</text>
        <text wx:else>â³</text>
      </view>
      <view class="status-info">
        <text class="status-text">
          {{order.status === 'completed' ? 'è®¢å•å·²å®Œæˆ' : order.status === 'cancelled' ? 'è®¢å•å·²å–æ¶ˆ' : 'è®¢å•å¾…å¤„ç†'}}
        </text>
        <text class="order-no">{{order.order_no}}</text>
      </view>
    </view>

    <!-- è®¢å•é‡‘é¢ -->
    <view class="amount-card">
      <view class="amount-label">è®¢å•é‡‘é¢</view>
      <view class="amount-value">Â¥{{order.total_amount}}</view>
    </view>

    <!-- å•†å“æ˜ç»† -->
    <view class="section">
      <view class="section-title">ğŸ“¦ å•†å“æ˜ç»†</view>
      <view class="items-list" wx:if="{{order.items && order.items.length > 0}}">
        <view class="item-row" wx:for="{{order.items}}" wx:key="index">
          <view class="item-info">
            <text class="item-name">{{item.product_name}}</text>
            <text class="item-price">Â¥{{item.unit_price}} Ã— {{item.quantity}}</text>
          </view>
          <text class="item-subtotal">Â¥{{item.subtotal}}</text>
        </view>
      </view>
      <view class="no-items" wx:else>
        <text>æš‚æ— å•†å“æ˜ç»†</text>
      </view>
    </view>

    <!-- è®¢å•ä¿¡æ¯ -->
    <view class="section">
      <view class="section-title">ğŸ“‹ è®¢å•ä¿¡æ¯</view>
      <view class="info-list">
        <view class="info-row">
          <text class="info-label">è®¢å•å·</text>
          <text class="info-value">{{order.order_no}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">æ”¶é“¶å‘˜</text>
          <text class="info-value">{{order.cashier}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">ä¸‹å•æ—¶é—´</text>
          <text class="info-value">{{order.created_at}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">è®¢å•çŠ¶æ€</text>
          <view class="status-badge {{order.status}}">
            {{order.status === 'completed' ? 'å·²å®Œæˆ' : order.status === 'cancelled' ? 'å·²å–æ¶ˆ' : 'å¾…å¤„ç†'}}
          </view>
        </view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="btn btn-warning" bindtap="revokeOrder">
        â†©ï¸ æ’¤é”€è®¢å•
      </button>
      <button class="btn btn-danger" bindtap="deleteOrder">
        ğŸ—‘ï¸ åˆ é™¤è®¢å•
      </button>
    </view>

    <!-- æ“ä½œæç¤º -->
    <view class="action-tips">
      <view class="tip-item">
        <text class="tip-icon">ğŸ’¡</text>
        <text class="tip-text">æ’¤é”€è®¢å•ï¼šæ¢å¤å•†å“åº“å­˜</text>
      </view>
      <view class="tip-item">
        <text class="tip-icon">âš ï¸</text>
        <text class="tip-text">åˆ é™¤è®¢å•ï¼šä¸æ¢å¤åº“å­˜ï¼Œæ•°æ®ä¸å¯æ¢å¤</text>
      </view>
    </view>
  </block>
</view>
