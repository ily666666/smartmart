<view class="page-container">
  <!-- ç­›é€‰æ  -->
  <view class="filter-section">
    <!-- å¿«æ·æ—¥æœŸ -->
    <view class="quick-dates">
      <view 
        class="quick-btn {{activeQuickDate === 1 ? 'active' : ''}}"
        data-days="1"
        bindtap="setQuickDate"
      >ä»Šå¤©</view>
      <view 
        class="quick-btn {{activeQuickDate === 7 ? 'active' : ''}}"
        data-days="7"
        bindtap="setQuickDate"
      >è¿‘7å¤©</view>
      <view 
        class="quick-btn {{activeQuickDate === 30 ? 'active' : ''}}"
        data-days="30"
        bindtap="setQuickDate"
      >è¿‘30å¤©</view>
    </view>
    
    <!-- è‡ªå®šä¹‰æ—¥æœŸ -->
    <view class="date-range">
      <picker mode="date" value="{{startDate}}" bindchange="onStartDateChange">
        <view class="date-picker">
          <text>{{startDate || 'å¼€å§‹æ—¥æœŸ'}}</text>
        </view>
      </picker>
      <text class="date-separator">è‡³</text>
      <picker mode="date" value="{{endDate}}" bindchange="onEndDateChange">
        <view class="date-picker">
          <text>{{endDate || 'ç»“æŸæ—¥æœŸ'}}</text>
        </view>
      </picker>
      <view class="search-btn" bindtap="doSearch">æŸ¥è¯¢</view>
    </view>
  </view>

  <!-- ç»Ÿè®¡æ  -->
  <view class="stats-bar" wx:if="{{totalCount > 0}}">
    <view class="stat-item">
      <text class="stat-label">å…±</text>
      <text class="stat-value">{{totalCount}}</text>
      <text class="stat-label">ç¬”è®¢å•</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-label">æ€»é‡‘é¢</text>
      <text class="stat-value amount">Â¥{{totalAmount}}</text>
    </view>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="order-list" wx:if="{{orders.length > 0}}">
    <view 
      class="order-item"
      wx:for="{{orders}}"
      wx:key="id"
      data-id="{{item.id}}"
      bindtap="viewOrder"
    >
      <view class="order-header">
        <text class="order-no">{{item.order_no}}</text>
        <view class="order-status {{item.status}}">
          {{item.status === 'completed' ? 'å·²å®Œæˆ' : item.status === 'cancelled' ? 'å·²å–æ¶ˆ' : 'å¾…å¤„ç†'}}
        </view>
      </view>
      
      <view class="order-body">
        <view class="order-info">
          <text class="order-amount">Â¥{{item.total_amount}}</text>
          <text class="order-meta">æ”¶é“¶å‘˜: {{item.cashier}}</text>
        </view>
        <view class="order-time">
          <text>{{item.created_at}}</text>
        </view>
      </view>
      
      <view class="order-arrow">â€º</view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && orders.length === 0 && wsConnected}}">
    <text class="empty-icon">ğŸ“­</text>
    <text class="empty-text">æš‚æ— è®¢å•è®°å½•</text>
    <text class="empty-hint">è°ƒæ•´æ—¥æœŸèŒƒå›´é‡æ–°æŸ¥è¯¢</text>
  </view>

  <!-- æœªè¿æ¥çŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!wsConnected}}">
    <text class="empty-icon">ğŸ”Œ</text>
    <text class="empty-text">æœªè¿æ¥æœåŠ¡å™¨</text>
    <text class="empty-hint">è¯·å…ˆåœ¨é¦–é¡µè¿æ¥æœåŠ¡å™¨</text>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading-more" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æ²¡æœ‰æ›´å¤š -->
  <view class="no-more" wx:if="{{!hasMore && orders.length > 0 && !loading}}">
    <text>æ²¡æœ‰æ›´å¤šäº†</text>
  </view>
</view>
